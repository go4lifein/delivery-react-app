{"version":3,"sources":["helpers/utils.js","api/misc.js","trace/Journey.js","trace/fonts/g4l.svg","trace/header.js","trace/icons/boards.svg","trace/Main.js","trace/icons/milkbox.svg","trace/Facts.js","trace/getDate.js","trace/Trace.js"],"names":["API_URL","getCookies","cookies","document","cookie","split","data","forEach","values","setCookie","name","value","days","expires","date","Date","setTime","getTime","toUTCString","initRequestAuthHeader","accessToken","userAccessToken","axios","defaults","headers","common","request","config","getReport","a","type","report_date","moment","format","url","method","result","Journey","useState","journey","setJourney","useEffect","startTime","bmc_receive","endTime","whs_dispatch","duration","diff","hours","parseInt","asHours","minutes","asMinutes","container","useRef","lottie","loadAnimation","current","renderer","loop","autoplay","speed","animationData","require","className","ref","Header","src","logo","alt","Main","setLoad","load","utc","plant_receive","plant_dispatch","whs_receive","board","onLoad","Facts","milkbox","onClick","window","open","pdf_url","ph","fat","snf","mbrt","GetDate","startDate","selected","dateFormat","Trace","location","setStartDate","isA2","setIsA2","setData","loading","setLoading","title","search","reportDate","URLSearchParams","get","response","console","log","getData","Loading"],"mappings":"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","file":"static/js/Trace.82beed8f.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nexport const API_URL = 'https://api.deliver.go4life.in/api';\r\n// export const API_URL = 'https://go4life-deliver.herokuapp.com/api';\r\n// export const API_URL = 'http://localhost:5000/api';\r\n// export const API_URL = 'http://192.168.40.14:5000/api';\r\n// export const API_URL = 'http://192.168.0.103:5000/api';\r\n\r\n// export const API_URL = '/api';\r\n\r\nexport function getCookies() {\r\n  var x = document.cookie;\r\n  let cookies = x.split(\";\");\r\n  let data = {};\r\n  cookies.forEach((cookie) => {\r\n    let values = cookie.split(\"=\");\r\n    data[values[0]] = values[1];\r\n  });\r\n  return data;\r\n}\r\n\r\nexport function setCookie(name, value, days) {\r\n  var expires = \"\";\r\n  if (days) {\r\n      var date = new Date();\r\n      date.setTime(date.getTime() + (days*24*60*60*1000));\r\n      expires = \"; expires=\" + date.toUTCString();\r\n  }\r\n  document.cookie = name + \"=\" + (value || \"\")  + expires + \"; path=/\";\r\n}\r\n\r\nfunction setRequestAuthHeader(accessToken) {\r\n  axios.defaults.headers.common[\"x-admin-token\"] = accessToken;\r\n}\r\n\r\nexport const userAccessToken = getCookies()[\"x-admin-token\"];\r\n\r\nexport function initRequestAuthHeader() {\r\n  let userAccessToken = getCookies()[\"x-admin-token\"];\r\n  if(userAccessToken) setRequestAuthHeader(userAccessToken);\r\n}\r\ninitRequestAuthHeader();\r\n\r\nexport function request(config) {\r\n  return axios.request(config);\r\n}\r\n\r\nexport function onlyMilkAndPaneer(products) {\r\n  const categories = Object.entries(products);\r\n  categories.forEach(([category, value]) => {\r\n    value.forEach(product => {\r\n      const name = product.product;\r\n      if(name.toLowerCase().includes(\"milk\") === false) return false;\r\n      if(name.toLowerCase().includes(\"paneer\") ===false) return false;\r\n    });\r\n  });\r\n  return true;\r\n}\r\n\r\n\r\nexport function hasOnlyDairyProducts(products) {\r\n  if('Dairy' in products && Object.entries(products).length === 1) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nexport function hasNoDairy(products) {\r\n  if(!('Dairy' in products)) {\r\n    return true;\r\n  }\r\n  return false;\r\n}","import {API_URL , request} from '../helpers/utils';\r\nimport moment from 'moment';\r\n\r\nexport async function getReport(type = 'a2', report_date = moment().format('YYYY-MM-DD')) {\r\n\r\n  let date = moment(report_date).format('YYYY-MM-DD');\r\n    \r\n  let url = `${API_URL}/misc/getReport?report_date=${date}&milk_type=${type}`;\r\n  let result =  await request({\r\n\r\n    url: url,\r\n    method: 'get',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    }\r\n\r\n  });\r\n\r\n  return result ;\r\n} ","import React, { useEffect, useRef , useState } from \"react\";\r\nimport lottie from \"lottie-web\";\r\nimport moment from \"moment\";\r\nimport \"./journey.scss\";\r\n\r\nexport default function Journey({data}) {\r\n  const [ journey ,setJourney ] =useState(\"\");\r\nuseEffect(() => {\r\n\r\n    if(!data)\r\n    return\r\n    let startTime = moment(data.bmc_receive);\r\n  let endTime = moment(data.whs_dispatch);\r\n  let duration = moment.duration(endTime.diff(startTime));\r\n\r\n  let hours = parseInt(duration.asHours());\r\n  let minutes = parseInt(duration.asMinutes()) % 60;\r\n  setJourney(hours + \" hours \" +  minutes + \" minutes \");\r\n\r\n} ,[data])\r\n  const container = useRef(null);\r\n\r\n  useEffect(() => {\r\n    lottie.loadAnimation({\r\n      container: container.current,\r\n      renderer: \"svg\",\r\n      loop: true,\r\n      autoplay: true,\r\n      speed: \"2.5x\",\r\n      animationData: require(\"./icons/truck.json\"),\r\n    });\r\n  }, []);\r\n  return (\r\n    <div className=\"journey\">\r\n      <div className=\"truck\" ref={container}></div>\r\n      <p className=\"time\">Total  journey  time : {journey}</p>\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/g4l.a71066e7.svg\";","import \"./header.scss\";\r\nimport logo from \"./fonts/g4l.svg\";\r\nexport default function Header() {\r\n  return (\r\n    <div className=\"header\">\r\n      <img src={logo} alt=\"logo\" className=\"logo\" />\r\n\r\n      <h1 className=\"heading\">Trace your milk's journey.</h1>\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/boards.dfad5378.svg\";","import React from \"react\";\r\n\r\nimport \"./main.scss\";\r\nimport board from \"./icons/boards.svg\";\r\nimport moment from \"moment\";\r\n//{moment(data.plant_receive).format('DD MM YYYY')}\r\n//{moment(data.plant_receive).format('hh:mm A')}\r\n\r\nexport default function Main({ data, setLoad, load }) {\r\n  return (\r\n    <div className=\"hero\">\r\n      <div className=\"board\">\r\n        {data && load && (\r\n          <>\r\n            <div className=\"section1\">\r\n              <div className=\"BMC\">\r\n                <h1>\r\n                  Recieved at<br></br> BMC (Tijara)\r\n                </h1>\r\n                <p>{moment.utc(data.bmc_receive).format(\"hh:mm A\")}</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"section2\">\r\n              <div className=\"plant-receive\">\r\n                <h1>\r\n                  {\" \"}\r\n                  Milk Pasteurized<br></br>at 85<span>&#176;</span>C (Manesar)\r\n                </h1>\r\n                <p>{moment.utc(data.plant_receive).format(\"hh:mm A\")}</p>\r\n              </div>\r\n              <div className=\"plant-dispatch\">\r\n                <h1>\r\n                  Packed in a 3-Layer<br></br>Tamper-Proof<br></br> Packaging\r\n                </h1>\r\n                <p>{moment.utc(data.plant_dispatch).format(\"hh:mm A\")}</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"section3\">\r\n              <div className=\"whs-receive\">\r\n                <h1>\r\n                  Arrived at <br></br> Warehouse\r\n                </h1>\r\n                <p>{moment.utc(data.whs_receive).format(\"hh:mm A\")}</p>\r\n              </div>\r\n              <div className=\"whs-dispatch\">\r\n                <h1>\r\n                  Dispatched for <br></br>Delivery\r\n                </h1>\r\n                <p>{moment.utc(data.whs_dispatch).format(\"hh:mm A\")}</p>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}{\" \"}\r\n        {data && (\r\n          <img\r\n            src={board}\r\n            onLoad={() => setLoad(true)}\r\n            className=\"timeline\"\r\n            alt=\"timeline\"\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/milkbox.31a0b475.svg\";","import  React , { useEffect } from \"react\";\r\nimport \"./facts.scss\";\r\n\r\nimport milkbox from \"./icons/milkbox.svg\";\r\n\r\nexport default function Facts( {data} ) {\r\n\r\n   \r\n   \r\n  return (\r\n    <div className=\"facts\">\r\n      <img src={milkbox} className=\"Milk\" alt=\"milkboxs\" />\r\n    {data &&<button className=\"download-btn\" onClick = {() => window.open(data.pdf_url)}> Download Full Report</button>}\r\n    { data&& \r\n      <div className=\"cards\">\r\n        <div className=\"section1\">\r\n          <div className=\"f1\">\r\n    \r\n            <h1>pH</h1>\r\n            \r\n            <p>{data.ph}</p>\r\n          </div>\r\n          <div className=\"f2\">\r\n            <h1>Fat </h1>\r\n            <p>{data.fat} %</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"section2\">\r\n          <div className=\"f3\">\r\n            <h1>SNF</h1>\r\n            <p>{data.snf} %</p>\r\n          </div>\r\n          <div className=\"f4\">\r\n            <h1>MBRT</h1>\r\n            <p>{data.mbrt} mins</p>\r\n          </div>\r\n        </div>\r\n        \r\n      </div>\r\n}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport DatePicker , {subDays} from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport \"./getdate.scss\";\r\n\r\nexport default function GetDate( {startDate}) {\r\n  \r\n  return (\r\n    <div className=\"datepicker\">\r\n      <DatePicker\r\n        className=\"box\"\r\n        selected={startDate}\r\n        dateFormat=\"MMMM d, yyyy\"\r\n      \r\n       \r\n      />\r\n\r\n    </div>\r\n  );\r\n}\r\n","\r\nimport React , {useState , useEffect} from \"react\";\r\nimport \"./trace.scss\";\r\nimport Header from \"./header.js\";\r\nimport Main from \"./Main.js\";\r\nimport Journey from \"./Journey.js\";\r\nimport Facts from \"./Facts.js\";\r\nimport GetDate from \"./getDate.js\";\r\nimport {getReport} from \"../api/misc.js\";\r\nimport Loading from \"../components/Loading.js\";\r\n\r\nexport default function Trace({ location }) {\r\n  const [startDate, setStartDate] = useState(new Date());\r\n  const [isA2, setIsA2] = useState(true);\r\n  const [data ,setData] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [load ,setLoad] = useState(false);\r\n\r\n  \r\n  useEffect(() => {\r\n    document.title = \"Go4Life - Trace Your Milk\"\r\n    let {search} = location;\r\n    search = new URLSearchParams(search);\r\n    const reportDate = search.get('report_date');\r\n    if(!reportDate)\r\n    return\r\n    const date = new Date(reportDate);\r\n    \r\n    const type = search.get('milk_type');  \r\n    setStartDate(date);\r\n    setIsA2(type === \"a2\" ? true : false);\r\n  }, [location]);\r\n\r\n  useEffect(() => {\r\n  \r\n    async function getData() {\r\n      try {\r\n        setLoading(true);\r\n        const response = await getReport(\"a2\", startDate);\r\n        setData(response.data);\r\n        setLoading(false);\r\n      }\r\n      catch (err) {\r\n        console.log(err);\r\n        setData(null);\r\n        setLoading(false);\r\n      }\r\n    }\r\n    getData();\r\n    \r\n  }, [startDate, isA2]);\r\n\r\n  return (\r\n    <div className=\"trace\">\r\n      <Header />\r\n      <GetDate startDate = {startDate} setStartDate ={setStartDate} isA2 = {isA2} setIsA2 = {setIsA2}/>\r\n      {loading && <Loading />}\r\n      {!data && !loading && !load && <p className = \"not-found\">Record Not Found</p>}\r\n      <Main data= {data} load = {load} setLoad = {setLoad} />\r\n      {data && load &&\r\n        <>\r\n          \r\n          <Journey data = {data} />\r\n          <Facts data= {data}  />\r\n        </>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}