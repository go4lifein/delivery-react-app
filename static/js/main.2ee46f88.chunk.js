(this["webpackJsonpdelivery-crm"]=this["webpackJsonpdelivery-crm"]||[]).push([[10],{14:function(e,r,a){"use strict";a.d(r,"c",(function(){return t})),a.d(r,"d",(function(){return i})),a.d(r,"a",(function(){return n})),a.d(r,"e",(function(){return c})),a.d(r,"b",(function(){return d})),a.d(r,"f",(function(){return o}));var t="UPDATE_DRIVER",i="UPDATE_ORDERS",n="UPDATE_ADMIN",c="UPDATE_ORDERS_DATA",d="UPDATE_ADMIN_DATA",o="UPDATE_ORDER_CRATE_DATA"},27:function(e,r,a){"use strict";a.d(r,"a",(function(){return n})),a.d(r,"f",(function(){return d})),a.d(r,"d",(function(){return o})),a.d(r,"e",(function(){return s})),a.d(r,"c",(function(){return u})),a.d(r,"b",(function(){return l}));a(46);var t=a(37),i=a.n(t),n="https://api.deliver.go4life.in/api";function c(){var e=document.cookie.split(";"),r={};return e.forEach((function(e){var a=e.split("=");r[a[0]]=a[1]})),r}function d(e,r,a){var t="";if(a){var i=new Date;i.setTime(i.getTime()+24*a*60*60*1e3),t="; expires="+i.toUTCString()}document.cookie=e+"="+(r||"")+t+"; path=/"}c()["x-admin-token"];function o(){var e,r=c()["x-admin-token"];console.log(r),r&&(e=r,i.a.defaults.headers.common["x-admin-token"]=e)}function s(e){return i.a.request(e)}function u(e){return"Dairy"in e&&1===Object.entries(e).length}function l(e){return!("Dairy"in e)}o()},45:function(e,r,a){"use strict";var t=a(3),i=a(99);a(0);r.a=function(){return Object(t.jsx)("div",{className:"flex center middle p-10",children:Object(t.jsx)(i.a,{})})}},74:function(e,r,a){},75:function(e,r,a){},98:function(e,r,a){"use strict";a.r(r);var t=a(3),i=a(0),n=a.n(i),c=a(24),d=a.n(c),o=(a(74),a(48)),s=a(2),u=a(65),l=a(115),p=a(116),_=(a(75),a(45)),v=Object(i.lazy)((function(){return Promise.all([a.e(1),a.e(3),a.e(16),a.e(21)]).then(a.bind(null,423))})),f=Object(i.lazy)((function(){return Promise.all([a.e(1),a.e(22)]).then(a.bind(null,424))})),b=Object(i.lazy)((function(){return Promise.all([a.e(2),a.e(12),a.e(15)]).then(a.bind(null,415))}));var y=function(){var e=Object(u.a)({palette:{secondary:{light:"#ff4081",main:"#f50057",dark:"#c51162",contrastText:"#fff"},background:{default:"#fff",paper:"#fff"}}});return Object(t.jsx)("div",{id:"app",children:Object(t.jsxs)(l.a,{theme:e,children:[Object(t.jsx)(p.a,{}),Object(t.jsx)(o.a,{base:"delivery-react-app",children:Object(t.jsx)("main",{children:Object(t.jsx)(i.Suspense,{fallback:Object(t.jsx)(_.a,{}),children:Object(t.jsxs)(s.c,{children:[Object(t.jsx)(s.a,{path:"/trace",exact:!0,component:b}),Object(t.jsx)(s.a,{path:"/admin",component:v}),Object(t.jsx)(s.a,{path:"/",component:f})]})})})})]})})},h=a(43),m=a(21),g=a(16),j=a(7),O=a(17),k=a(14),x=a(27),D=window.localStorage.getItem("admin"),w={admin:D=D?JSON.parse(D):void 0,loadingOrderData:!0};function E(e,r){var a=e.customers,t=r.payload,i=t.id;if(a){var n,c=Object(O.a)(a);try{for(c.s();!(n=c.n()).done;){var d=n.value,o=d[1];if(o.order_id===i){o=Object(j.a)(Object(j.a)({},o),t),d[1]=o,console.log(d[1]);break}}}catch(s){c.e(s)}finally{c.f()}}return e}var T=window.localStorage.getItem("driver"),A={driver:T=T?JSON.parse(T):void 0};function S(e){return"Dairy"in e&&1===Object.entries(e).length}function I(e){return!("Dairy"in e)}var M=Object(m.c)(Object(m.b)({setDriver:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(r.type){case k.c:var a=r.payload;return window.localStorage.setItem("driver",JSON.stringify(a)),Object(j.a)(Object(j.a)({},e),{},{driver:a});case k.d:var t=r.payload,i=new Map,n=new Map;t.forEach((function(e){var r=e.subarea,a=e.area,t=e.hub;if(n.has(t)){var i=n.get(t);if(i.has(a)){var c=i.get(a);c.includes(r)||c.push(r),i.set(a,c),n.set(t,i)}else{var d=[r];i.set(a,d),n.set(t,i)}}else{var o=new Map;o.set(a,[r]),n.set(t,o)}}));var c=[],d=[],o=[],s=[],u={};t.forEach((function(e){var r=e.order_id,a=e.crate_id,t=e.customer_id,n=e.customer_name,l=e.phone_number,p=e.address_id,_=e.house_number,v=e.subarea,f=e.area,b=e.hub,y=e.category,h=e.product,m=e.quantity,j=e.package_size,O=e.package_type,k=e.product_package_id,x=e.product_id,D=e.region_id,w=e.location_id,E=e.delivery_person_id,T={product:h,product_id:x,product_package_id:k,package_size:j,quantity:m,total:j*m,unit:O},A={driver_id:e.driver_id,deliver_date:e.deliver_date,delivery_type:e.delivery_type,proof_img:e.proof_img,complete_delivery:e.complete_delivery,order_cancel_reason:e.order_cancel_reason,boxes:e.boxes,milk_packets:e.milk_packets};if(!1===c.includes(y)&&c.push(y),x in u||(u[x]=h),i.has(t)){var S=i.get(t),I=S.products;y in I?I[y].push(T):I[y]=[T],S.products=I,S.delivery=A,S.delivered=A.deliver_date}else{!1===o.includes(f)&&o.push(f),!1===s.includes(v)&&s.push(v),!1===d.includes(b)&&d.push(b);var M={name:n,phone:l,order_id:r,crate_id:a,address:{address_id:p,house_number:_,subarea:v,area:f,hub:b,region_id:D,location_id:w},products:Object(g.a)({},y,[T]),delivery_person_id:E,delivery:A,delivered:A.deliver_date};i.set(t,M)}}));var l,p=Object(O.a)(i);try{for(p.s();!(l=p.n()).done;){var _=l.value,v=_[1].products;S(v)?_[1].onlyDairy=!0:_[1].onlyDairy=!1,I(v)?_[1].hasNoDairy=!0:_[1].onlyDairy=!1}}catch(f){p.e(f)}finally{p.f()}return Object(j.a)(Object(j.a)({},e),{},{customers:i,locations:n,areas:o,subareas:s,hubs:d,orders:t});default:return e}},setAdmin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(r.type){case k.a:var a=r.payload;return window.localStorage.setItem("admin",JSON.stringify(a)),Object(j.a)(Object(j.a)({},e),{},{admin:a});case k.b:return Object(j.a)(Object(j.a)({},e),r.payload);case k.f:return E(e,r);case k.e:var t=r.payload,i=new Map,n=new Map,c=new Map,d=!1;t.forEach((function(e){var r=e.subarea,a=e.area,t=e.hub;if(e.crate_id&&(d=!0),c.has(t)){var i=c.get(t);if(i.has(a)){var n=i.get(a);n.includes(r)||n.push(r),i.set(a,n),c.set(t,i)}else{var o=[r];i.set(a,o),c.set(t,i)}}else{var s=new Map;s.set(a,[r]),c.set(t,s)}}));var o=[],s=[],u=[],l=[],p={};t.forEach((function(e){var r=e.order_id,a=e.crate_id,t=e.order_staus,n=e.order_type,c=e.TIMESTAMP,_=e.last_update_on,v=e.crates,f=e.remark,b=e.small_boxes,y=e.large_boxes,h=e.customer_id,m=e.customer_name,j=e.phone_number,O=e.address_id,k=e.house_number,x=e.subarea,D=e.area,w=e.hub,E=e.category,T=e.product,A=e.quantity,S=e.package_size,I=e.package_type,M=e.product_package_id,P=e.product_id,N=e.region_id,z=e.location_id,R=e.delivery_person_id,q=e.driver_id,U=e.deliver_date,J=e.delivery_type,C=e.proof_img,B=e.complete_delivery,V=e.order_cancel_reason,F=e.boxes,G=e.milk_packets;if(!d||a){var H={product:T,product_id:P,product_package_id:M,package_size:S,quantity:A,category:E,total:S*A,unit:I},K={driver_id:q,deliver_date:U,delivery_type:J,proof_img:C,complete_delivery:B,order_cancel_reason:V,boxes:F,milk_packets:G};if(!1===o.includes(E)&&o.push(E),P in p||(p[P]=T),i.has(h)){var L=i.get(h),Q=L.products;E in Q?Q[E].push(H):Q[E]=[H],L.products=Q,L.delivery=K,L.delivered=K.deliver_date}else{!1===u.includes(D)&&u.push(D),!1===l.includes(x)&&l.push(x),!1===s.includes(w)&&s.push(w);var W={name:m,phone:j,order_id:r,crate_id:a,order_staus:t,order_type:n,TIMESTAMP:c,last_update_on:_,crates:v,remark:f,small_boxes:b,large_boxes:y,delivery_person_id:R,address:{address_id:O,house_number:k,subarea:x,area:D,hub:w,region_id:N,location_id:z},products:Object(g.a)({},E,[H]),fnvProducts:[],delivery:K,delivered:K.deliver_date};i.set(h,W)}}}));var _,v=1,f=Object(O.a)(i);try{for(f.s();!(_=f.n()).done;){var b=_.value,y=b[1].products;Object(x.c)(y)?b[1].onlyDairy=!0:(b[1].onlyDairy=!1,b[1].crateId=v,v++),Object(x.b)(y)?b[1].hasNoDairy=!0:b[1].hasNoDairy=!1}}catch(A){f.e(A)}finally{f.f()}var h,m=Object(O.a)(i);try{for(m.s();!(h=m.n()).done;){var D=h.value,T=D[1].products;Object(x.c)(T)&&(D[1].crateId=v,v++)}}catch(A){m.e(A)}finally{m.f()}return t.forEach((function(e){var r=e.customer_id,a=e.category,t=e.product,c=e.quantity,o=e.package_size,s=e.package_type,u=e.product_id,l=e.crate_id;if(!d||l){var p={quantity:c,total:o*c,crateId:i.get(r).crateId,crate_id:i.get(r).crate_id};if(n.has(u)){var _=n.get(u),v=_.crates;v.push(p),_.crates=v}else{var f={package_size:o,product_id:u,product:t,category:a,unit:s,crates:[p]};n.set(u,f)}}})),Object(j.a)(Object(j.a)({},e),{},{alreadyCreatedCratedToday:d,loadingOrderData:!1,customers:i,locations:c,productsCollection:n,products:p,areas:u,subareas:l,categories:o,hubs:s,orders:t});default:return e}}}));d.a.render(Object(t.jsx)(n.a.StrictMode,{children:Object(t.jsx)(h.a,{store:M,children:Object(t.jsx)(y,{})})}),document.getElementById("root"))}},[[98,11,13]]]);
//# sourceMappingURL=main.2ee46f88.chunk.js.map