(this["webpackJsonpdelivery-crm"]=this["webpackJsonpdelivery-crm"]||[]).push([[41],{185:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return v})),n.d(t,"g",(function(){return h})),n.d(t,"f",(function(){return f})),n.d(t,"a",(function(){return j})),n.d(t,"c",(function(){return b}));var r=n(22),a=n(172),c=n.n(a),o=n(30),i=n.n(o);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c()().format("YYYY-MM-DD"),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c()().format("YYYY-MM-DD"),n="".concat(r.a,"/v2/order/getAllOrders?fromDate=").concat(e,"&endDate=").concat(t);return Object(r.d)(n)}function d(){var e="".concat(r.a,"/v2/order/getDeliveryBoysData");return Object(r.d)(e)}function u(e){var t="".concat(r.a,"/v2/order/assignDrivers");return Object(r.g)(t,e)}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c()().format("YYYY-MM-DD"),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c()().format("YYYY-MM-DD"),n="".concat(r.a,"/v2/order/getOrderedProducts?fromDate=").concat(e,"&endDate=").concat(t);return Object(r.d)(n)}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c()().format("YYYY-MM-DD"),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c()().format("YYYY-MM-DD"),n="".concat(r.a,"/v2/order/getOrderProducts?fromDate=").concat(e,"&endDate=").concat(t);return Object(r.d)(n)}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c()().format("YYYY-MM-DD"),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c()().format("YYYY-MM-DD"),n="".concat(r.a,"/v2/order/getOrderBoxData?fromDate=").concat(e,"&endDate=").concat(t);return Object(r.d)(n)}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c()().format("YYYY-MM-DD"),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c()().format("YYYY-MM-DD"),n="".concat(r.a,"/v2/order/getDeliveryReport?fromDate=").concat(e,"&endDate=").concat(t);return Object(r.d)(n)}function j(e){var t="".concat(r.a,"/delivery/addDeliveryPerson");return i.a.put(t,e,{headers:{"Content-Type":"application/json"}})}function b(){var e="".concat(r.a,"/farmers/getAllFarmers");return Object(r.d)(e)}},617:function(e,t,n){"use strict";n.r(t);var r=n(161),a=n.n(r),c=n(162),o=n(156),i=n(157),s=n(158),d=n(159),u=n(2),l=n(0),v=n.n(l),h=n(627),f=n(415),j=n(414),b=n(58),m=n(62),D=n(246),O=n(574),g=n(194),p=n.n(g),Y=n(185),x=n(42),y=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).onChange=function(e){r.setState(Object(m.a)({},e.target.name,e.target.value))},r.onSubmit=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(Y.a)({name:r.state.name,phone:r.state.phone}).then((function(e){r.props.enqueueSnackbar("Driver Added",{anchorOrigin:{vertical:"bottom",horizontal:"left"},variant:"success"}),r.setState({name:"",phone:""})})).catch((function(e){r.props.enqueueSnackbar("Driver could not be added",{anchorOrigin:{vertical:"bottom",horizontal:"left"},variant:"error"})}));case 3:r.props.refreshData();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.state={name:"",phone:""},r}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.phone,r=this.props.toggleDriverForm;return Object(u.jsx)("div",{children:Object(u.jsx)("form",{id:"driver-form",onSubmit:this.onSubmit,className:"p-10",children:Object(u.jsx)(D.a,{container:!0,justify:"center",spacing:2,children:Object(u.jsx)(D.a,{item:!0,xs:12,children:Object(u.jsxs)("div",{className:"flex middle",children:[Object(u.jsx)("div",{className:"mh-10",children:Object(u.jsx)(h.a,{label:"Driver Name",name:"name",variant:"outlined",required:!0,value:t,onChange:this.onChange})}),Object(u.jsx)("div",{children:Object(u.jsx)(h.a,{required:!0,label:"Phone No:",name:"phone",variant:"outlined",value:n,onChange:this.onChange})}),Object(u.jsxs)("div",{children:[Object(u.jsx)(f.a,{variant:"contained",color:"primary",type:"submit",style:{margin:10},children:"Submit"}),Object(u.jsx)(O.a,{style:{marginLeft:10},onClick:r,children:Object(u.jsx)(p.a,{})})]})]})})})})})}}]),n}(l.Component),M=Object(x.c)(y),S=n(189),k=n.n(S),C=n(193),w=n.n(C),N=Object(u.jsx)(w.a,{});function P(e){var t=e.data;return Object(u.jsx)("div",{children:Object(u.jsx)(k.a,{striped:!0,noHeader:!0,selectableRows:!1,dense:!0,sortIcon:N,data:t,columns:[{name:"Driver Name",selector:"name",sortable:!0,width:"300px"},{name:"Phone No.",selector:"phone",sortable:!0,width:"300px"}],highlightOnHover:!0,pointerOnHover:!0,pagination:!0,paginationPerPage:20})})}var F=v.a.memo(P),q=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).refreshData=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.e)();case 2:t=e.sent,r.setState({deliveryboys:t.data});case 4:case"end":return e.stop()}}),e)}))),r.filterData=function(){var e=r.state.search,t=[];return r.state.deliveryboys&&(t=r.state.deliveryboys.filter((function(t){return!(!t.name.includes(e)&&!t.phone.includes(e))}))),t},r.onSearch=function(e){r.setState({search:e.target.value}),r.filterData()},r.toggleDriverForm=function(){r.setState((function(e){return{addingDriver:!e.addingDriver}}))},r.state={loading:!0,addingDriver:!1,name:"",phone:"",deliveryboys:[],search:""},r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.setState({loading:!1}),this.refreshData()}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.addingDriver,r=(e.name,e.phone,this.filterData());return t?Object(u.jsx)(b.a,{}):Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{}),Object(u.jsxs)("div",{className:"flex space-bw m-10 middle",children:[Object(u.jsx)("div",{children:Object(u.jsx)(h.a,{label:"Search by Name or Phone",value:this.state.search,onChange:this.onSearch})}),Object(u.jsx)("div",{children:Object(u.jsx)(f.a,{variant:"contained",color:"primary",onClick:this.toggleDriverForm,children:"Add Driver"})})]}),n&&Object(u.jsx)(j.a,{className:"m-10 p-10",children:Object(u.jsx)(M,{toggleDriverForm:this.toggleDriverForm,refreshData:this.refreshData})}),Object(u.jsx)(F,{data:r})]})}}]),n}(l.Component);t.default=q}}]);