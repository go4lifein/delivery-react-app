{"version":3,"sources":["components/DriverOrderTable.js","components/ChooseOrder.js"],"names":["React","memo","withRouter","props","data","history","id","map","item","address","area","phone","orderId","region","name","subarea","region_id","customerID","driverId","location_id","orderDate","Card","style","margin","CardHeader","onClick","deliveryId","alert","push","title","className","marginLeft","Divider","CardContent","paddingTop","paddingBottom","href","fontWeight","toString","ChooseOrder","state","selectedArea","selectedSubarea","selectedHub","showDelivered","this","onUpdateOrdersData","driver","getMyOrders","then","res","orders","filter","length","includes","indexOf","toLowerCase","loading","locations","hubs","areas","subareas","forEach","hub","hubName","areaName","concat","sort","a","b","localeCompare","filterData","Loading","padding","Grid","container","spacing","xs","TextField","fullWidth","value","label","onChange","e","setState","target","FormControl","InputLabel","Select","labelId","MenuItem","FormControlLabel","control","Switch","checked","color","Button","selectedDriver","showWithoutDairy","Component","connect","setDriver","dispatch","updateOrders"],"mappings":"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","file":"static/js/38.840454e7.chunk.js","sourcesContent":["import React from 'react';\r\nimport { withRouter } from \"react-router\";\r\n// import DataTable from \"react-data-table-component\";\r\nimport PhoneIcon from '@material-ui/icons/Phone';\r\nimport Card from '@material-ui/core/Card';\r\n// import Link from 'react-router-dom';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Avatar from '@material-ui/core/Avatar';\r\n\r\nfunction DriverOrderTable(props) {\r\n  \r\n  const {data, history} = props;\r\n\r\n  return (\r\n    <div id=\"order cards\">\r\n      {data.map(item => {\r\n        const {\r\n          address,\r\n          area,\r\n          phone,\r\n          orderId,\r\n          region,\r\n          name,\r\n          subarea,\r\n          region_id,\r\n          customerID,\r\n          driverId,\r\n          location_id,\r\n          orderDate\r\n        } = item;\r\n\r\n        return (\r\n          <Card\r\n            key={orderId.toString()}\r\n            style={{\r\n              margin: 10\r\n            }}\r\n          >\r\n            <CardHeader\r\n              onClick={() => {\r\n                if(item.deliveryId) {\r\n                  alert('Already delivered');\r\n                  return;\r\n                }\r\n                history.push(`/${orderId}/deliver`)\r\n              }}\r\n              title={ \r\n                <div>\r\n                  <div className=\"flex middle\">\r\n                    {/* <Avatar style={{background: 'red'}}>\r\n                      {\"10\"}\r\n                    </Avatar> */}\r\n                    <div style={{marginLeft: 10}}>\r\n                      {name}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              }\r\n            />\r\n            <Divider />\r\n            <CardContent>\r\n              <div style={{paddingTop: 10, paddingBottom: 10}}>\r\n                <a href={`tel:+91${phone}`} className=\"flex middle\">\r\n                  <PhoneIcon /> {phone}\r\n                </a>\r\n              </div>\r\n              <div>\r\n                <span style={{fontWeight: 'bold'}}>\r\n                  Address\r\n                </span> {address}, {subarea}, {area}, {region}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default React.memo(withRouter(DriverOrderTable));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport { Button, TextField, Grid } from '@material-ui/core';\r\n\r\nimport Loading from '../components/Loading';\r\nimport {getMyOrders} from '../api/v2/driver';\r\nimport {updateOrders} from '../actions/driver.actions';\r\nimport DriverOrderTable from './DriverOrderTable';\r\n\r\nfunction mapStateToProps(state) {\r\n  let {setDriver} = state;\r\n  return {\r\n    ...setDriver\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    onUpdateOrdersData: (data) => dispatch(updateOrders(data))\r\n  };\r\n}\r\n\r\nclass ChooseOrder extends Component {\r\n  state = {\r\n    phone: \"\",\r\n    selectedArea: [],\r\n    selectedSubarea: [],\r\n    selectedHub: null,\r\n    showDelivered: false\r\n  }\r\n  componentDidMount() {\r\n    let {onUpdateOrdersData, driver} = this.props;\r\n    getMyOrders(driver.id)\r\n    .then(res => {\r\n      onUpdateOrdersData(res.data);\r\n    })\r\n  }  \r\n  filterData() {\r\n    let {selectedSubarea, selectedArea, selectedHub, phone } = this.state;\r\n    let { orders } = this.props;\r\n    \r\n    let data = [];\r\n    \r\n    if(orders) {\r\n      data = orders.filter((item) => {\r\n        if(selectedHub) {\r\n          // console.log(selectedHub, item.region)\r\n          if(item.region !== selectedHub) return false;\r\n        }\r\n        if(selectedArea.length) {\r\n          if(!selectedArea.includes(item.area)) return false;\r\n        }\r\n        if(selectedSubarea.length) {\r\n          if(!selectedSubarea.includes(item.subarea)) return false;\r\n        }\r\n        if(phone) {\r\n          if(item.phone.indexOf(phone) !== -1) return true;\r\n          if(item.name.toLowerCase().indexOf(phone.toLowerCase()) !== -1) return true;\r\n          if(item.orderId.toString().indexOf(phone.toLowerCase()) !== -1) return true;\r\n          return false;\r\n        }\r\n        return true;\r\n      })\r\n    }\r\n    return data;\r\n  }\r\n  render() {\r\n    let loading = true, data = [];\r\n    let {selectedArea, selectedHub, selectedSubarea, phone, showDelivered } = this.state;\r\n    let {orders, locations, hubs} = this.props;\r\n    \r\n    let areas = [], subareas = [];\r\n    \r\n    if(locations) locations.forEach((hub, hubName) => {\r\n      hub.forEach((area, areaName) => {\r\n        if( selectedHub === hubName ) {\r\n          areas.push(areaName);\r\n        }\r\n        if( selectedArea.includes(areaName) || selectedArea.length === 0) {\r\n          subareas = subareas.concat(area);\r\n        }\r\n      });\r\n    });\r\n\r\n    areas = areas.sort((a, b) => a.localeCompare(b));\r\n    subareas = subareas.sort((a, b) => a.localeCompare(b));\r\n\r\n    if(orders) {\r\n      loading = false;\r\n      data = this.filterData();\r\n      data = data.filter((item) => {\r\n        if(showDelivered) {\r\n          if(item.deliveryId) return true;\r\n          return false;\r\n        } else {\r\n          if(item.deliveryId) return false;\r\n          return true;\r\n        }\r\n      })\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        {\r\n          loading ? \r\n          <Loading /> :\r\n          <div>\r\n            <div\r\n              className=\"flex middle\"\r\n              style={{padding: 10}}\r\n            >\r\n\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={6}>\r\n                  <TextField\r\n                    fullWidth\r\n                    value={phone}\r\n                    label=\"Phone or Name\"\r\n                    onChange={(e) => this.setState({phone: e.target.value})}\r\n                  />\r\n                </Grid>\r\n\r\n              <Grid item xs={6}>\r\n                <FormControl fullWidth>\r\n                  <InputLabel id=\"hub-filter\">Hub</InputLabel>\r\n                  <Select\r\n                    fullWidth\r\n                    labelId=\"hub-filter\"\r\n                    value={selectedHub}\r\n                    onChange={(e) => {\r\n                      let selectedHub = e.target.value;\r\n                      this.setState({selectedHub, selectedArea: [], selectedSubarea: []})\r\n                    }}\r\n                  >\r\n                    {/* <MenuItem value=\"all\">All</MenuItem> */}\r\n                    {hubs.map(item => (\r\n                      <MenuItem value={item} key={item}>{item}</MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n            </Grid>\r\n              \r\n            </div>\r\n\r\n            <div\r\n              className=\"flex middle\"\r\n              style={{padding: 10}}\r\n            >\r\n              \r\n              <Grid container spacing={2}>\r\n                <Grid item xs={6}>\r\n                <FormControl fullWidth>\r\n                  <InputLabel id=\"area-filter\">Area</InputLabel>\r\n                  <Select\r\n                    labelId=\"area-filter\"\r\n                    fullWidth\r\n                    value={selectedArea}\r\n                    onChange={(e) => {\r\n                      let selectedArea = e.target.value;\r\n                      this.setState({selectedArea, selectedSubarea: []})\r\n                    }}\r\n                  >\r\n                    {/* <MenuItem value=\"all\">All</MenuItem> */}\r\n                    {areas.map(item => (\r\n                      <MenuItem value={item} key={item}>{item}</MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n\r\n              <Grid item xs={6}>\r\n                <FormControl fullWidth>\r\n                  <InputLabel id=\"subarea-filter\">Subareas</InputLabel>\r\n                  <Select\r\n                    labelId=\"subarea-filter\"\r\n                    fullWidth\r\n                    value={selectedSubarea}\r\n                    onChange={(e, b) => {\r\n                      let selectedSubarea = e.target.value;\r\n                      this.setState({selectedSubarea});\r\n                    }}\r\n                  >\r\n                    {/* <MenuItem value=\"all\">All</MenuItem> */}\r\n                    {subareas.map(item => (\r\n                      <MenuItem value={item} key={item}>{item}</MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                  </FormControl>\r\n              </Grid>\r\n              \r\n            </Grid>\r\n            </div>\r\n            <div\r\n              className=\"flex space-bw\"\r\n              style={{padding: 10}}\r\n            >\r\n              <div>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Switch\r\n                      checked={showDelivered}\r\n                      onChange={(e, showDelivered) => this.setState({showDelivered})}\r\n                      color=\"primary\"\r\n                    />\r\n                  }\r\n                  label=\"Delivered\"\r\n                />\r\n              </div>\r\n              <div >\r\n                <Button\r\n                  color=\"primary\"\r\n                  onClick={() => {\r\n                    this.setState({\r\n                      phone: \"\",\r\n                      selectedArea: 'all',\r\n                      selectedSubarea: 'all',\r\n                      selectedHub: 'all',\r\n                      selectedDriver: 'all',\r\n                      showWithoutDairy: false\r\n                    })\r\n                  }}\r\n                >\r\n                  Clear All Filters\r\n                </Button>\r\n              </div>\r\n            </div>\r\n            <DriverOrderTable \r\n              data={data}\r\n            />\r\n          </div>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ChooseOrder);"],"sourceRoot":""}