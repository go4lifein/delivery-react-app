(this["webpackJsonpdelivery-crm"]=this["webpackJsonpdelivery-crm"]||[]).push([[44],{623:function(e,t,r){"use strict";r.r(t);var a=r(156),n=r(157),c=r(158),l=r(159),i=r(3),s=r(2),d=r(0),o=r.n(d),j=r(28),u=r(599),h=r(627),b=r(262),f=r(580),O=r(243),v=r(261),x=r(244),p=r(624),m=r(413),g=r(58),y=r(289),S=r(288),C=r(5),D=r(503),w=r.n(D),A=r(412),I=r(576),k=r(577),W=r(403),H=r(119);var N=o.a.memo(Object(C.f)((function(e){var t=e.data,r=e.history;return Object(s.jsx)("div",{id:"order cards",children:t.map((function(e){var t=e.address,a=e.area,n=e.phone,c=e.orderId,l=e.region,i=e.name,d=e.subarea,o=(e.region_id,e.customerID,e.driverId,e.location_id,e.orderDate,e.delivery_instruction);return Object(s.jsxs)(A.a,{style:{margin:10},children:[Object(s.jsx)(I.a,{onClick:function(){e.deliveryId?alert("Already delivered"):r.push("/".concat(c,"/deliver"))},title:Object(s.jsx)("div",{children:Object(s.jsx)("div",{className:"flex middle",children:Object(s.jsx)("div",{style:{marginLeft:10},children:i})})})}),o&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(W.a,{}),Object(s.jsxs)(k.a,{style:{backgroundColor:"blue"},children:[Object(s.jsx)(H.a,{variant:"body1",style:{color:"#fff"},children:"Delivery Instructions"}),Object(s.jsx)(H.a,{variant:"h5",style:{color:"#fff"},children:o})]})]}),Object(s.jsx)(W.a,{}),Object(s.jsxs)(k.a,{children:[Object(s.jsx)("div",{style:{paddingTop:10,paddingBottom:10},children:Object(s.jsxs)("a",{href:"tel:+91".concat(n),className:"flex middle",children:[Object(s.jsx)(w.a,{})," ",n]})}),Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{style:{fontWeight:"bold"},children:"Address"})," ",t,", ",d,", ",a,", ",l]})]})]},c.toString())}))})})));var _=function(e){Object(c.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={phone:"",selectedArea:[],selectedSubarea:[],selectedHub:"",showDelivered:!1},e}return Object(n.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onUpdateOrdersData,r=e.driver;Object(y.a)(r.id).then((function(e){t(e.data)}))}},{key:"filterData",value:function(){var e=this.state,t=e.selectedSubarea,r=e.selectedArea,a=e.selectedHub,n=e.phone,c=this.props.orders,l=[];return c&&(l=c.filter((function(e){return(!a||e.region===a)&&(!(r.length&&!r.includes(e.area))&&(!(t.length&&!t.includes(e.subarea))&&(!n||(-1!==e.phone.indexOf(n)||(-1!==e.name.toLowerCase().indexOf(n.toLowerCase())||-1!==e.orderId.toString().indexOf(n.toLowerCase()))))))}))),l}},{key:"render",value:function(){var e=this,t=!0,r=[],a=this.state,n=a.selectedArea,c=a.selectedHub,l=a.selectedSubarea,i=a.phone,d=a.showDelivered,o=this.props,j=o.orders,y=o.locations,S=o.hubs,C=[],D=[];return y&&y.forEach((function(e,t){e.forEach((function(e,r){c===t&&C.push(r),(n.includes(r)||0===n.length)&&(D=D.concat(e))}))})),C=C.sort((function(e,t){return e.localeCompare(t)})),D=D.sort((function(e,t){return e.localeCompare(t)})),j&&(t=!1,r=(r=this.filterData()).filter((function(e){return d?!!e.deliveryId:!e.deliveryId}))),r=r.sort((function(e,t){return e.location_id-t.location_id})),Object(s.jsx)("div",{children:t?Object(s.jsx)(g.a,{}):Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"flex middle",style:{padding:10},children:Object(s.jsxs)(x.a,{container:!0,spacing:2,children:[Object(s.jsx)(x.a,{item:!0,xs:6,children:Object(s.jsx)(p.a,{fullWidth:!0,value:i,label:"Phone or Name",onChange:function(t){return e.setState({phone:t.target.value})}})}),Object(s.jsx)(x.a,{item:!0,xs:6,children:Object(s.jsxs)(f.a,{fullWidth:!0,children:[Object(s.jsx)(h.a,{id:"hub-filter",children:"Hub"}),Object(s.jsx)(u.a,{fullWidth:!0,labelId:"hub-filter",value:c,onChange:function(t){var r=t.target.value;e.setState({selectedHub:r,selectedArea:[],selectedSubarea:[]})},children:S.map((function(e){return Object(s.jsx)(b.a,{value:e,children:e},e)}))})]})})]})}),Object(s.jsx)("div",{className:"flex middle",style:{padding:10},children:Object(s.jsxs)(x.a,{container:!0,spacing:2,children:[Object(s.jsx)(x.a,{item:!0,xs:6,children:Object(s.jsxs)(f.a,{fullWidth:!0,children:[Object(s.jsx)(h.a,{id:"area-filter",children:"Area"}),Object(s.jsx)(u.a,{labelId:"area-filter",fullWidth:!0,value:n,onChange:function(t){var r=t.target.value;e.setState({selectedArea:r,selectedSubarea:[]})},children:C.map((function(e){return Object(s.jsx)(b.a,{value:e,children:e},e)}))})]})}),Object(s.jsx)(x.a,{item:!0,xs:6,children:Object(s.jsxs)(f.a,{fullWidth:!0,children:[Object(s.jsx)(h.a,{id:"subarea-filter",children:"Subareas"}),Object(s.jsx)(u.a,{labelId:"subarea-filter",fullWidth:!0,value:l,onChange:function(t,r){var a=t.target.value;e.setState({selectedSubarea:a})},children:D.map((function(e){return Object(s.jsx)(b.a,{value:e,children:e},e)}))})]})})]})}),Object(s.jsxs)("div",{className:"flex space-bw",style:{padding:10},children:[Object(s.jsx)("div",{children:Object(s.jsx)(O.a,{control:Object(s.jsx)(v.a,{checked:d,onChange:function(t,r){return e.setState({showDelivered:r})},color:"primary"}),label:"Delivered"})}),Object(s.jsx)("div",{children:Object(s.jsx)(m.a,{color:"primary",onClick:function(){e.setState({phone:"",selectedArea:"all",selectedSubarea:"all",selectedHub:"all",selectedDriver:"all",showWithoutDairy:!1})},children:"Clear All Filters"})})]}),Object(s.jsx)(N,{data:r})]})})}}]),r}(d.Component);t.default=Object(j.b)((function(e){var t=e.setDriver;return Object(i.a)({},t)}),(function(e){return{onUpdateOrdersData:function(t){return e(Object(S.b)(t))}}}))(_)}}]);