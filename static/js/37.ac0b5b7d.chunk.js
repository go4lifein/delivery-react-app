(this["webpackJsonpdelivery-crm"]=this["webpackJsonpdelivery-crm"]||[]).push([[37],{176:function(t,e,r){"use strict";r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return s})),r.d(e,"b",(function(){return d})),r.d(e,"i",(function(){return l})),r.d(e,"h",(function(){return f})),r.d(e,"g",(function(){return v})),r.d(e,"f",(function(){return m})),r.d(e,"a",(function(){return b})),r.d(e,"c",(function(){return h}));var n=r(32),a=r(173),c=r.n(a),o=r(28),i=r.n(o);function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c()().format("YYYY-MM-DD"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c()().format("YYYY-MM-DD"),r="".concat(n.a,"/v2/order/getAllOrders?fromDate=").concat(t,"&endDate=").concat(e);return Object(n.d)(r)}function s(){var t="".concat(n.a,"/v2/order/getDeliveryBoysData");return Object(n.d)(t)}function d(t){var e="".concat(n.a,"/v2/order/assignDrivers");return Object(n.f)(e,t)}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c()().format("YYYY-MM-DD"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c()().format("YYYY-MM-DD"),r="".concat(n.a,"/v2/order/getOrderedProducts?fromDate=").concat(t,"&endDate=").concat(e);return Object(n.d)(r)}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c()().format("YYYY-MM-DD"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c()().format("YYYY-MM-DD"),r="".concat(n.a,"/v2/order/getOrderProducts?fromDate=").concat(t,"&endDate=").concat(e);return Object(n.d)(r)}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c()().format("YYYY-MM-DD"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c()().format("YYYY-MM-DD"),r="".concat(n.a,"/v2/order/getOrderBoxData?fromDate=").concat(t,"&endDate=").concat(e);return Object(n.d)(r)}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c()().format("YYYY-MM-DD"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c()().format("YYYY-MM-DD"),r="".concat(n.a,"/v2/order/getDeliveryReport?fromDate=").concat(t,"&endDate=").concat(e);return Object(n.d)(r)}function b(t){var e="".concat(n.a,"/delivery/addDeliveryPerson");return i.a.put(e,t,{headers:{"Content-Type":"application/json"}})}function h(){var t="".concat(n.a,"/farmers/getAllFarmers");return Object(n.d)(t)}},482:function(t,e,r){},581:function(t,e,r){"use strict";r.r(e);var n=r(166),a=r.n(n),c=r(167),o=r(153),i=r(154),u=r(155),s=r(156),d=r(2),l=r(0),f=r.n(l),v=r(54),m=r(53),b=r(32),h=r(28),p=r.n(h);function j(){var t="".concat(b.a,"/products/getAllProducts");return Object(b.d)(t)}function O(){var t="".concat(b.a,"/products/getAllCategories");return Object(b.d)(t)}function g(t){var e="".concat(b.a,"/trace/addHarvestReport");return p.a.put(e,t,{headers:{"Content-Type":"application/json"}})}var D=r(176),Y=r(5),y=r(603),x=r(115),S=r(606),M=r(564),I=r(48);var C=r(59);function w(t){return function(t){if(Array.isArray(t))return Object(I.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(C.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T=r(27),k=r(584),A=r(563),N=r(60);var W=Object(N.b)((function(t){var e=t.onChange,r=t.enqueueSnackbar,n=t.product,a=void 0===n?null:n,c=f.a.useState(""),o=Object(T.a)(c,2),i=o[0],u=o[1],s=f.a.useState([]),l=Object(T.a)(s,2),v=l[0],m=l[1];return f.a.useEffect((function(){var t=!1;try{(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="".concat(b.a,"/products/searchProducts?name=").concat(t);return Object(b.d)(e)})(i).then((function(e){var r=e.data;!1===t&&(r=r.filter((function(t){return"Fruits & Vegetables"===t.category})),m(r))})).catch((function(t){r("Error in fetching products: ".concat(t.response?t.response.data:t.message),{anchorOrigin:{vertical:"bottom",horizontal:"left"},variant:"error"})}))}catch(e){}return function(){t=!0}}),[i,r]),Object(d.jsx)(A.a,{fullWidth:!0,children:Object(d.jsx)(k.a,{id:"product-dropdown",style:{minWidth:300},required:!0,getOptionLabel:function(t){return"string"===typeof t?t:t.name},options:v,autoComplete:!0,getOptionSelected:function(t,e){return t.name===e.name},value:a,onChange:function(t,r){console.log(r),m(r?[r].concat(w(v)):v),e(t,r)},onInputChange:function(t,e){u(e)},renderInput:function(t){return Object(d.jsx)(y.a,Object(Y.a)(Object(Y.a)({},t),{},{label:"Search Product",name:"productId",required:!0,fullWidth:!0}))},renderOption:function(t){return t.name}})})})),q=(r(482),function(t){Object(u.a)(r,t);var e=Object(s.a)(r);function r(){var t;Object(o.a)(this,r);for(var n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];return(t=e.call.apply(e,[this].concat(i))).state={loading:!1},t.onSubmit=function(){var e=Object(c.a)(a.a.mark((function e(r){var n,c,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n=t.props.enqueueSnackbar,c=t.state,o=c.farmerId,i=c.harvestTime,u=c.productId,o&&u&&i){e.next=5;break}return e.abrupt("return");case 5:return t.setState({loading:!0}),e.next=8,g({farmerId:o,harvestTime:i,productId:u}).then((function(e){n("Report has been added",{anchorOrigin:{vertical:"bottom",horizontal:"left"},variant:"success"}),t.setState({farmerId:null,farmer:null,productId:null,product:null,harvestTime:""})})).catch((function(t){n("Error in adding report: ".concat(t.response?t.response.data:t.message),{anchorOrigin:{vertical:"bottom",horizontal:"left"},variant:"error"})})).finally((function(){t.setState({loading:!1})}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}return Object(i.a)(r,[{key:"render",value:function(){var t=this,e=this.props.farmers,r=void 0===e?[]:e,n=this.state,a=n.farmer,c=void 0===a?{}:a,o=n.product,i=n.loading,u=n.harvestTime;return Object(d.jsx)("div",{children:Object(d.jsxs)("form",{onSubmit:this.onSubmit,className:"responsive-form",children:[Object(d.jsx)("div",{className:"p-10",style:{minWidth:200},children:Object(d.jsx)(k.a,{style:{minWidth:300},options:r,required:!0,filterOptions:function(t,e){return t.filter((function(t){return t.name.toLowerCase().includes(e.inputValue.toLowerCase())}))},value:c,getOptionSelected:function(t,e){return t.name===e.name},getOptionLabel:function(t){return t.name||""},renderInput:function(t){return Object(d.jsx)(y.a,Object(Y.a)(Object(Y.a)({},t),{},{label:"Farmer",name:"farmerId",required:!0,fullWidth:!0}))},onChange:function(e,r){console.log(r),r?t.setState({farmerId:r.id,farmer:r}):t.setState({farmerId:null,farmer:{}})},renderOption:function(t){return Object(d.jsxs)("div",{className:"flex middle",children:[Object(d.jsx)("div",{className:"p-4",children:Object(d.jsx)("img",{src:t.image,alt:t.name,style:{width:40}})}),Object(d.jsxs)("div",{children:[Object(d.jsx)(x.a,{variant:"body1",children:t.name}),Object(d.jsxs)(x.a,{variant:"body2",color:"textSecondary",children:[t.subregion,", ",t.region]})]})]})}})}),Object(d.jsx)("div",{className:"p-10",children:Object(d.jsx)(W,{product:o,onChange:function(e,r){r?t.setState({productId:r.id,product:r}):t.setState({productId:null,product:null})}})}),Object(d.jsxs)("div",{className:"p-10",style:{minWidth:200},children:[Object(d.jsx)(S.a,{id:"harvestTime",children:"Harvest Time"}),Object(d.jsx)(y.a,{labelId:"harvestTime",fullWidth:!0,value:u||"",onChange:function(e){t.setState({harvestTime:e.target.value})},name:"harvestTime",type:"datetime-local",required:!0})]}),Object(d.jsx)("div",{className:"p-10",children:Object(d.jsx)(M.a,{type:"submit",variant:"contained",color:"primary",disabled:i,children:"Submit"})})]})})}}]),r}(l.Component)),P=Object(N.b)(q);var R=function(t){Object(u.a)(r,t);var e=Object(s.a)(r);function r(t){var n;return Object(o.a)(this,r),(n=e.call(this,t)).refreshData=Object(c.a)(a.a.mark((function t(){var e,r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.setState({loading:!0}),t.prev=1,t.next=4,Object(D.c)().then((function(t){return t.data}));case 4:return e=t.sent,t.next=7,j().then((function(t){return t.data}));case 7:return r=t.sent,t.next=10,O().then((function(t){return t.data}));case 10:c=t.sent,n.setState({products:r,categories:c,farmers:e,loading:!1}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),n.setState({loading:!1,error:t.t0.response?t.t0.response.data:t.t0.message});case 17:case"end":return t.stop()}}),t,null,[[1,14]])}))),n.addHarvestReport=function(t){console.log(t)},n.state={},n}return Object(i.a)(r,[{key:"componentDidMount",value:function(){this.refreshData()}},{key:"render",value:function(){var t=this.state,e=t.products,r=t.categories,n=t.farmers,a=t.error,c=t.loading;return a||Object(d.jsx)("div",{children:c?Object(d.jsx)(v.a,{}):Object(d.jsxs)("div",{children:[Object(d.jsx)(x.a,{variant:"h4",className:"p-10",children:"Add Harvest Report"}),Object(d.jsx)(P,{farmers:n,products:e,categories:r,onSubmit:this.addHarvestReport})]})})}}]),r}(l.Component);e.default=Object(m.b)((function(t){return{}}),(function(t){return{}}))(R)}}]);