{"version":3,"sources":["components/DriverOrderTable.js","components/ChooseOrder.js"],"names":["React","memo","withRouter","props","data","history","id","map","item","order_id","crate_id","name","phone","address","hub","area","subarea","house_number","Card","style","margin","CardHeader","onClick","delivered","alert","push","title","className","Avatar","background","marginLeft","Divider","CardContent","paddingTop","paddingBottom","href","fontWeight","ChooseOrder","state","selectedArea","selectedSubarea","selectedHub","showDelivered","this","onUpdateOrdersData","driver","getMyOrders","then","res","loading","customers","locations","areas","subareas","hubs","filteredAreas","get","Array","from","keys","sort","a","b","localeCompare","subareasCollection","values","forEach","areaSubareas","Map","has","filter","indexOf","toLowerCase","delivery","deliver_date","Loading","padding","Grid","container","spacing","xs","TextField","fullWidth","value","label","onChange","e","setState","target","FormControl","InputLabel","Select","labelId","MenuItem","FormControlLabel","control","Switch","checked","color","Button","selectedDriver","showWithoutDairy","Component","connect","setDriver","dispatch","updateOrders"],"mappings":"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","file":"static/js/24.5348b438.chunk.js","sourcesContent":["import React from 'react';\r\nimport { withRouter } from \"react-router\";\r\n// import DataTable from \"react-data-table-component\";\r\nimport PhoneIcon from '@material-ui/icons/Phone';\r\nimport Card from '@material-ui/core/Card';\r\n// import Link from 'react-router-dom';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Avatar from '@material-ui/core/Avatar';\r\n\r\nfunction DriverOrderTable(props) {\r\n  \r\n  const {data, history} = props;\r\n\r\n  return (\r\n    <div id=\"order cards\">\r\n      {data.map(item => {\r\n        const {order_id, crate_id, name, phone, address} = item;\r\n        const {hub, area, subarea, house_number} = address;\r\n        return (\r\n          <Card\r\n            style={{\r\n              margin: 10\r\n            }}\r\n          >\r\n            <CardHeader\r\n              onClick={() => {\r\n                if(item.delivered) {\r\n                  alert('Already delivered');\r\n                  return;\r\n                }\r\n                history.push(`/${order_id}/deliver`)\r\n              }}\r\n              title={ \r\n                <div>\r\n                  <div className=\"flex middle\">\r\n                    <Avatar style={{background: 'red'}}>\r\n                      {crate_id}\r\n                    </Avatar>\r\n                    <div style={{marginLeft: 10}}>\r\n                      {name}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              }\r\n            />\r\n            <Divider />\r\n            <CardContent>\r\n              <div style={{paddingTop: 10, paddingBottom: 10}}>\r\n                <a href={`tel:+91${phone}`} className=\"flex middle\">\r\n                  <PhoneIcon /> {phone}\r\n                </a>\r\n              </div>\r\n              <div>\r\n                <span style={{fontWeight: 'bold'}}>\r\n                  Address\r\n                </span> {house_number}, {subarea}, {area}, {hub}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default React.memo(withRouter(DriverOrderTable));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport { Button, TextField, Grid } from '@material-ui/core';\r\n\r\nimport Loading from '../components/Loading';\r\nimport {getMyOrders} from '../api/driver';\r\nimport {updateOrders} from '../actions/driver.actions';\r\nimport DriverOrderTable from './DriverOrderTable';\r\n\r\nfunction mapStateToProps(state) {\r\n  let {setDriver} = state;\r\n  return {\r\n    ...setDriver\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    onUpdateOrdersData: (data) => dispatch(updateOrders(data))\r\n  };\r\n}\r\n\r\nclass ChooseOrder extends Component {\r\n  state = {\r\n    phone: \"\",\r\n    selectedArea: 'all',\r\n    selectedSubarea: 'all',\r\n    selectedHub: 'all',\r\n    showDelivered: false\r\n  }\r\n  componentDidMount() {\r\n    let {onUpdateOrdersData, driver} = this.props;\r\n    getMyOrders(driver.id)\r\n    .then(res => {\r\n      onUpdateOrdersData(res.data);\r\n    })\r\n  }\r\n  render() {\r\n    let loading = true, data = [];\r\n    let {selectedArea, selectedHub, selectedSubarea, phone, showDelivered } = this.state;\r\n    let {customers, locations, areas, subareas, hubs} = this.props;\r\n\r\n    \r\n    if(selectedHub !== 'all') {\r\n      let filteredAreas = locations.get(selectedHub);\r\n      areas = Array.from(filteredAreas.keys());\r\n\r\n      areas = areas.sort((a, b) => a.localeCompare(b));\r\n      \r\n      let subareasCollection = selectedArea !== 'all' ? [filteredAreas.get(selectedArea)] : Array.from(filteredAreas.values());\r\n      subareas = [];\r\n      subareasCollection.forEach(areaSubareas => {\r\n        areaSubareas.forEach(subarea => subareas.push(subarea));\r\n      });\r\n      subareas = subareas.sort((a, b) => a.localeCompare(b));\r\n    }\r\n\r\n    if(selectedArea !== 'all') {\r\n      \r\n      let filteredAreas = new Map();\r\n      Array.from(locations.keys()).forEach(hub => {\r\n        if(locations.get(hub).has(selectedArea)) {\r\n          filteredAreas = locations.get(hub);\r\n        }\r\n      })\r\n\r\n      let subareasCollection = [filteredAreas.get(selectedArea)]\r\n      subareas = [];\r\n      subareasCollection.forEach(areaSubareas => {\r\n        areaSubareas.forEach(subarea => subareas.push(subarea));\r\n      });\r\n      subareas = subareas.sort((a, b) => a.localeCompare(b));\r\n    }\r\n\r\n    if(customers) {\r\n      loading = false;\r\n      data = Array.from(customers.values());\r\n      \r\n\r\n      data = data.filter((item) => {\r\n        if(selectedHub !== 'all') {\r\n          if(item.address.hub !== selectedHub) return false;\r\n        }\r\n        if(selectedArea !== 'all') {\r\n          if(item.address.area !== selectedArea) return false;\r\n        }\r\n        if(selectedSubarea !== 'all') {\r\n          if(item.address.subarea !== selectedSubarea) return false;\r\n        }\r\n        if(phone) {\r\n          if(item.phone.indexOf(phone) !== -1) return true;\r\n          if(item.name.toLowerCase().indexOf(phone.toLowerCase()) !== -1) return true;\r\n          return false;\r\n        }\r\n        return true;\r\n      });\r\n      data = data.filter((item) => {\r\n        if(showDelivered) {\r\n          if(item.delivery.deliver_date) return true;\r\n          return false;\r\n        } else {\r\n          if(item.delivery.deliver_date) return false;\r\n          return true;\r\n        }\r\n      })\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        {\r\n          loading ? \r\n          <Loading /> :\r\n          <div>\r\n            <div\r\n              className=\"flex middle\"\r\n              style={{padding: 10}}\r\n            >\r\n\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={6}>\r\n                  <TextField\r\n                    fullWidth\r\n                    value={phone}\r\n                    label=\"Phone or Name\"\r\n                    onChange={(e) => this.setState({phone: e.target.value})}\r\n                  />\r\n                </Grid>\r\n\r\n              <Grid item xs={6}>\r\n                <FormControl fullWidth>\r\n                  <InputLabel id=\"hub-filter\">Hub</InputLabel>\r\n                  <Select\r\n                    fullWidth\r\n                    labelId=\"hub-filter\"\r\n                    value={selectedHub}\r\n                    onChange={(e) => {\r\n                      let selectedHub = e.target.value;\r\n                      this.setState({selectedHub, selectedArea: 'all', selectedSubarea: 'all'})\r\n                    }}\r\n                  >\r\n                    <MenuItem value=\"all\">All</MenuItem>\r\n                    {hubs.map(item => (\r\n                      <MenuItem value={item} key={item}>{item}</MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n            </Grid>\r\n              \r\n            </div>\r\n\r\n            <div\r\n              className=\"flex middle\"\r\n              style={{padding: 10}}\r\n            >\r\n              \r\n              <Grid container spacing={2}>\r\n                <Grid item xs={6}>\r\n                <FormControl fullWidth>\r\n                  <InputLabel id=\"area-filter\">Area</InputLabel>\r\n                  <Select\r\n                    labelId=\"area-filter\"\r\n                    fullWidth\r\n                    value={selectedArea}\r\n                    onChange={(e) => {\r\n                      let selectedArea = e.target.value;\r\n                      this.setState({selectedArea, selectedSubarea: 'all'})\r\n                    }}\r\n                  >\r\n                    <MenuItem value=\"all\">All</MenuItem>\r\n                    {areas.map(item => (\r\n                      <MenuItem value={item} key={item}>{item}</MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n\r\n              <Grid item xs={6}>\r\n                <FormControl fullWidth>\r\n                  <InputLabel id=\"subarea-filter\">Subareas</InputLabel>\r\n                  <Select\r\n                    labelId=\"subarea-filter\"\r\n                    fullWidth\r\n                    value={selectedSubarea}\r\n                    onChange={(e, b) => {\r\n                      let selectedSubarea = e.target.value;\r\n                      this.setState({selectedSubarea});\r\n                    }}\r\n                  >\r\n                    <MenuItem value=\"all\">All</MenuItem>\r\n                    {subareas.map(item => (\r\n                      <MenuItem value={item} key={item}>{item}</MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                  </FormControl>\r\n              </Grid>\r\n              \r\n            </Grid>\r\n            </div>\r\n            <div\r\n              className=\"flex space-bw\"\r\n              style={{padding: 10}}\r\n            >\r\n              <div>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Switch\r\n                      checked={showDelivered}\r\n                      onChange={(e, showDelivered) => this.setState({showDelivered})}\r\n                      color=\"primary\"\r\n                    />\r\n                  }\r\n                  label=\"Delivered\"\r\n                />\r\n              </div>\r\n              <div >\r\n                <Button\r\n                  color=\"primary\"\r\n                  onClick={() => {\r\n                    this.setState({\r\n                      phone: \"\",\r\n                      selectedArea: 'all',\r\n                      selectedSubarea: 'all',\r\n                      selectedHub: 'all',\r\n                      selectedDriver: 'all',\r\n                      showWithoutDairy: false\r\n                    })\r\n                  }}\r\n                >\r\n                  Clear All Filters\r\n                </Button>\r\n              </div>\r\n            </div>\r\n            <DriverOrderTable \r\n              data={data}\r\n            />\r\n          </div>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ChooseOrder);"],"sourceRoot":""}